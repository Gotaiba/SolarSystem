@model IEnumerable<SolarSystemConsumption.Models.FinalData>
@{
    ViewBag.Title = "SchoolResult";
}

<h2>School Result</h2>

<table id="Result" class="table table-bordered">
    <thead>
        <tr>
            <th>Device</th>
            <th>No. Devices</th>
            <th>Consumption</th>
            <th>Total Consumption</th>
        </tr>
    </thead>
    <tbody>
        @{
            var bigTotal = (long?)0;
            foreach (var item in Model)
            {
                var total = item.NoDevice * item.Consumption;
                bigTotal += total;
                <tr>
                    <td>@item.Device</td>
                    <td>@item.NoDevice</td>
                    <td>@item.Consumption <i>(w)</i><i class="glyphicon glyphicon-flash"></i></td>
                    <td>@string.Format("{0:n0}", total) <i>(w)</i><i class="glyphicon glyphicon-flash"></i></td>
                </tr>
            }
        }
        <tr style="background-color: #9ec5fd;box-shadow: 2px 4px 4px -2px #9c9c9c;">
            <td colspan="3" class="text-center">Total Consumptions Received</td>
            <td>
                <strong id="Total">@string.Format("{0:n0}", bigTotal) <i>(w)</i><i class="glyphicon glyphicon-flash"></i></strong>
            </td>
        </tr>
    </tbody>
</table>
@{
    int Panels = Convert.ToInt32((bigTotal * 1.3) / 300);
    double? wattcal = (bigTotal * 1.3) / 6.38;
    int panelsForBatteries = Convert.ToInt32(wattcal / 300);
    int Batteries = Convert.ToInt32(((wattcal * 1.3) / 12) / 200);

}
<div class="row">
    <div class="col-md-6">
        <div class="card">
            <h3>Without Battries</h3>
            <hr />
            <p>
                <label>No. Panels:</label>&nbsp;&nbsp;<span>@Panels</span>
            </p>
            <p>
                <label>No. Invertors:</label>&nbsp;&nbsp;<span>1</span>
            </p>
            <p>
                <label>No. Battries:</label>&nbsp;&nbsp;<span>0</span>
            </p>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <h3>With Battries</h3>
            <hr />
            <p>
                <label>No. Panels:</label>&nbsp;&nbsp;<span>@panelsForBatteries</span>
            </p>
            <p>
                <label>No. Invertors:</label>&nbsp;&nbsp;<span>1</span>
            </p>
            <p>
                <label>No. Battries:</label>&nbsp;&nbsp;<span>@Batteries</span>
            </p>
        </div>
    </div>

</div>
<ul class="pager">
    <li class="next"><a href="#"><span aria-hidden="true">&larr;</span> Back</a></li>
</ul>

